<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="https://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="https://wellformedweb.org.commentAPI/"
	xmlns:dc="https://purl.org/dc/elements/1.1/"
	xmlns:atom="https://www.w3.org/2005/Atom"
	xmlns:sy="https://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="https://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Javascript &#8211; James K Nelson</title>
	<atom:link href="/category/javascript/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description></description>
	<lastBuildDate>Thu, 09 Aug 2018 09:21:15 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.9.3</generator>
	<item>
		<title>CRUV: Structure React apps in 4 directories and 3 files</title>
		<link>/cruv-react-project-structure/</link>
					<comments>/cruv-react-project-structure/#respond</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Thu, 09 Aug 2018 08:27:09 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<guid isPermaLink="false">/?p=1194</guid>

					<description><![CDATA[<p>So you&#8217;re starting a React project. You know what you want to build, and quickly spin up a project with create-react-app. And then you&#8217;re confronted with the problem of where. Where do your components go? Where should you put business logic? Where do higher order components fit in? And even if your structure feels right... <a class="more-link" href="/cruv-react-project-structure/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/cruv-react-project-structure/">CRUV: Structure React apps in 4 directories and 3 files</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>So you&#8217;re starting a React project. You know what you want to build, and quickly spin up a project with <a href="https://github.com/facebook/create-react-app/">create-react-app</a>. And then you&#8217;re confronted with the problem of <em>where</em>.</p>
<p><em>Where</em> do your components go? <em>Where</em> should you put business logic? <em>Where</em> do higher order components fit in? And even if your structure feels right <em>now</em>, how do you know that it won&#8217;t feel wrong <em>later?</em></p>
<p>If you&#8217;ve used other frameworks, you know that it doesn&#8217;t have to be this way. Rails gives you structure. So does Angular. What if <em>React</em> also had a system that told you exactly where files go? You could focus on <em>building stuff</em> instead of dicking around with folder structures.</p>
<p>In fact, there <em>is</em> a system that does just this. I&#8217;ve been using it for months now. It works great with create-react-app and any router you pick &#8212; <em>even no router!</em> And it&#8217;s named CRUV, after the 4 directories that you&#8217;ll use.</p>
<h2>Containers, Routes, Utils, Views</h2>
<p>CRUV is inspired by the directory structure from Ruby on Rails. It gives you four standard directories, for the things that you&#8217;ll <em>definitely</em> use. Then it lets you add other app-specific folders and subdirectories <em>once you need them</em>.</p>
<p>Creating a CRUV app is simple. All you do is generate an app with create-react-app, and then create 4 folders and 2 files. You can try it out by copying and pasting this into your terminal:</p>
<pre><code>create-react-app myapp
cd myapp/src
mkdir containers routes utils views
touch config.js contexts.js 
mv App.* routes
sed -i '' -e 's/.\/App/.\/routes\/App/g' index.js
</code></pre>
<p><em><a href="https://gist.github.com/jamesknelson/42a893a3a790d02f24f512b6860aa116">See the gist Â»</a></em></p>
<p>But what do the 4 directories and 2 files in this structure actually do? Let me demonstrate with examples from the app that runs my new Raw React course. <small>Shameless plug: join my newsletter at the bottom of this page to keep in the loop when the course is released, <em>and</em> get a massive discount.</small></p>
<p><img src="/wp-content/uploads/2018/08/react-cruv-folders.png" alt="CRUV directory structure&quot; width=&quot;150&quot; height=&quot;150&quot; class=&quot;alignnone size-thumbnail wp-image-1201&quot;" srcset="/wp-content/uploads/2018/08/react-cruv-folders.png 1200w, /wp-content/uploads/2018/08/react-cruv-folders-300x150.png 300w, /wp-content/uploads/2018/08/react-cruv-folders-768x384.png 768w, /wp-content/uploads/2018/08/react-cruv-folders-1024x512.png 1024w, /wp-content/uploads/2018/08/react-cruv-folders-150x75.png 150w, /wp-content/uploads/2018/08/react-cruv-folders-400x200.png 400w, /wp-content/uploads/2018/08/react-cruv-folders-800x400.png 800w, /wp-content/uploads/2018/08/react-cruv-folders-200x100.png 200w" sizes="(max-width: 1200px) 100vw, 1200px" /></p>
<h3><code>/containers</code></h3>
<p>This directory contains <em>reusable</em> <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">container components</a>. These components handle business logic, delegate style/markup to view components, and importantly, <em>are used in more than one place</em>.</p>
<p>Container components can also communicate with the server. In larger apps, they may delegate this to a Redux or Apollo store. But in smaller apps, they&#8217;ll usually just call the server directly.</p>
<p>Examples include:</p>
<ul>
<li>An <code>&lt;ArticleContainer /&gt;</code> component that loads and wraps <a href="https://jamesknelson.com/mdxc/">MDX documents</a>.</li>
<li>A <code>&lt;CourseLessonContainer /&gt;</code> component that loads course access/progress from the server, and handles user requests to mark lessons as complete.</li>
<li>An <code>&lt;EditorContainer /&gt;</code> component that handles loading/saving of the students&#8217;s answers for exercises.</li>
</ul>
<p>But what if you have something that looks like a container, but is only used once? Then it probably goes in <code>/routes</code>.</p>
<h3><code>/routes</code></h3>
<p>Routes are general purpose components <em>that are only used once</em>. They can handle both business logic <em>and</em> presentation internally, or they can delegate it to containers or presentation components.</p>
<p>Routes often correspond to individual URLs, and that&#8217;s where they get their name. But routes can also be independent of URL.</p>
<p>Examples include:</p>
<ul>
<li>An <code>&lt;App /&gt;</code> component that wraps everything else, renders the app header, and decides what to render based on the current URL.</li>
<li>A <code>&lt;LandingPage /&gt;</code> component that contains your landing page&#8217;s content.</li>
<li>A <code>&lt;LoginPage /&gt;</code> component that shows a login form, and handles user input on that form. </li>
</ul>
<p>So what router should your routes use? Whichever <a href="https://junctions.js.org/">router</a> <a href="https://github.com/ReactTraining/react-router">you&#8217;d</a> <a href="https://reach.tech/router">like</a>, or even none at all! Because even if your app runs from a single URL, you&#8217;ll still need an <code>&lt;App&gt;</code> component. Maybe you&#8217;ll have other one-off components too.</p>
<h3><code>/utils</code></h3>
<p>This is the place to put files that get copied and pasted between many different projects. Things like vanilla JavaScript functions and classes, higher order components, and other utilities.</p>
<p>Some examples include:</p>
<ul>
<li>A <code>formatDate()</code> function that converts JavaScript <code>Date</code> objects into strings.</li>
<li>A <code>&lt;Dimensions&gt;</code> component that uses a render prop to make the <code>width</code> and <code>height</code> of its children available.</li>
</ul>
<h3><code>/views</code></h3>
<p>Put components that render markup and styles here, along with components that receive and display user input. Dan Abramov calls them <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">presentational components</a>. I call them &#8220;views&#8221;, because it&#8217;s faster to type within <code>import</code> statements..</p>
<p>Some examples:</p>
<ul>
<li>Styled <code>&lt;Button&gt;</code> components.</li>
<li>A <code>&lt;CourseCard&gt;</code> component that creates a link to a given page, and looks like a &#8220;card&#8221;.</li>
<li>A <code>&lt;Grid&gt;</code> component that is used within route components and other views to handle layout.</li>
</ul>
<p>I tend to start by creating one <code>.js</code>, <code>.css</code> and <code>.test.js</code> file per component, and putting them directly in the <code>/views</code> directory. So for example, <code>/views/Button.css</code>, <code>/views/Button.js</code>, and <code>/views/Button.test.js</code>. But this isn&#8217;t a hard and fast rule; you can also export multiple components from a single file. For example, an <code>Indicators.js</code> file may export both <code>&lt;Spinner /&gt;</code> and <code>&lt;LoadingBar /&gt;</code>.</p>
<h3><code>/config.js</code></h3>
<p>Apps often have configuration that differs depending on the environment. For example, an <code>API_KEY</code> environment variable that differs between development, staging and production. While you <em>can</em> access this kind of configuration directly from <code>process.env</code>, I prefer to export it from a top-level <code>config.js</code> file. For example:</p>
<pre><code>export default {
  server: process.env.REACT_APP_SERVER || 'http://localhost:3000/',
  publicURL: process.env.PUBLIC_URL,
  stripeKey: process.env.REACT_APP_STRIPE_KEY,
}
</code></pre>
<h3><code>/contexts.js</code></h3>
<p>To use React&#8217;s Context API, you&#8217;ll frequently need to import <code>&lt;Context.Consumer /&gt;</code> components, which often don&#8217;t fit in any of the other categories. I like to keep these components in a single top-level file, making them easy to access, and also discouraging over-use of context. Here&#8217;s an example:</p>
<pre><code>import * as React from 'react'

// Current route and methods for interacting with browser history
export const NavContext = React.createContext(undefined)

// Data received from server
export const StoreContext = React.createContext(undefined)

// UI context, including whether the subtree is disabled, is a form, etc.
export const UIContext = React.createContext(undefined)
</code></pre>
<h3><code>/index.js</code></h3>
<p>This is your application&#8217;s entry point, as created by create-react-app! Simple, huh?</p>
<h2>As your project grows&#8230;</h2>
<p>As your project grows, your <code>views</code> and <code>routes</code> folders can start to feel a little full. In this case, you might want to add subdirectories for each component, with an extra <code>index.js</code> file that re-exports the components. This let&#8217;s you keep the same filenames as before, without having to change any <code>import</code> statements.</p>
<p>For example, a <code>/views/Button/index.js</code> file might look like this:</p>
<pre><code>export * from './Button.js'
</code></pre>
<p>You may also find yourself adding subdirectories that group related components. For example, I have a <code>/views/editor</code> subdirectory that groups together all the components involved in my course&#8217;s live editor.</p>
<p>Finally, in addition to the standard four CRUV directories, you may also find <em>other</em> useful directories. For example, my app has a <code>/types</code> directory, because it&#8217;s written in TypeScript. <em>But I didn&#8217;t start with this directory.</em> I only added it once my <code>/utils</code> directory got a little heavy with type definitions.</p>
<p><strong>The reason that the CRUV structure works is that it&#8217;s just a starting point.</strong> When you&#8217;re just starting out, it gives you a simple structure to work with so that you can concentrate on writing actual code. And once your folders get full, all you need to do is find a few similar files, and move them into a new directory. <strong>It&#8217;s easier to categories files that already exist than to predict the future.</strong></p>
<h2>But where do my reducers go?</h2>
<p>You may noticed that I haven&#8217;t added a directory for Redux reducers. And that brings me to this article by one of the creators of Redux: <a href="https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367">You Might Not Need Redux</a>. Yes, you read that correctly: one of the creators of Redux is asking you to reconsider using Redux.</p>
<p><strong>The reason that there are no <code>/reducers</code> or <code>/actions</code> directories in the CRUV structure is that Redux is <em>optional</em>.</strong> In fact, I write apps without Redux all the time!</p>
<p>But what if you <em>do</em> use Redux? Or MobX? Or <a href="https://github.com/jamesknelson/govern">Govern</a>? In that case, my recommendation is that you add a <code>/store</code> directory, and put all your store related code in there. Stores hold global state that isn&#8217;t tied to a specific component, so they generally shouldn&#8217;t be very large.</p>
<p>And if you <em>do</em> have state that needs to be tied to a specific component? Use <code>setState()</code>! That&#8217;s what it is there for; component state is a simple, powerful, and underappreciated tool. <strong>Raw React can get you a long way.</strong></p>
<h2>Where is CRUV used?</h2>
<p>If you&#8217;ve worked with some React apps before, CRUV may feel familiar. While the names are probably a little different, this pattern is something that often evolves by itself &#8212; especially when building on the <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">Presentational and Container Components</a> pattern.</p>
<p>In my case, CRUV is the structure that evolved from an app that I&#8217;m building to <em>teach</em> Raw React. I&#8217;ll be going into more details on how I built the platform behind the course soon. To get the details, or to be the first to hear about the Raw React course (and get a massive discount), join my newsletter below! I&#8217;ll even email you five free PDF cheatsheets to sweeten the deal.</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;">&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;</a>. I&#8217;m looking forward to hearing from you!</p>
<p>The post <a rel="nofollow" href="/cruv-react-project-structure/">CRUV: Structure React apps in 4 directories and 3 files</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/cruv-react-project-structure/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>JSX, HTML-in-JS and CSS-in-JS</title>
		<link>/css-html-in-js-mistakes/</link>
					<comments>/css-html-in-js-mistakes/#respond</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Mon, 21 Aug 2017 14:53:20 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<category><![CDATA[Theming]]></category>
		<guid isPermaLink="false">/?p=1160</guid>

					<description><![CDATA[<p>Lately, I&#8217;ve been hearing a lot of people talk about JSX as if it is HTML-in-JS. So let me clear something up: JSX is not HTML-in-JS. The thing about JSX is that it is just a special syntax for writing plain-old JavaScript. Each JSX element compiles to a call to a JavaScript function called React.createElement.... <a class="more-link" href="/css-html-in-js-mistakes/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/css-html-in-js-mistakes/">JSX, HTML-in-JS and CSS-in-JS</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>Lately, I&#8217;ve been hearing a lot of people talk about JSX as if it is HTML-in-JS. So let me clear something up:</p>
<p><strong>JSX is not HTML-in-JS.</strong></p>
<p>The thing about JSX is that it is just a special syntax for writing plain-old JavaScript.</p>
<p>Each JSX element compiles to a call to a JavaScript function called <code>React.createElement</code>. In fact, you can write apps without using JSX at all; just call <code>React.createElement</code> by itself. Like this:</p>
<pre><code>ReactDOM.render(
  React.createElement('div', {}, "Hello, world!"),
  document.getElementById('app')
)
</code></pre>
<p>To repeat myself, JSX is not HTML-in-JS. Yes, it <em>is</em> a way to specify the structure of the DOM. But so is raw JavaScript, like this:</p>
<pre><code>const app = document.getElementById('app')
const hello = document.createElement('div')
hello.appendChild(document.createTextNode('Hello, world!'))
app.appendChild(hello)
</code></pre>
<p>If you&#8217;re writing an app with JavaScript, you need some way to modify the DOM. JSX is one way of doing it. Raw JavaScript is another. But in either case, you&#8217;re still working with JavaScript.</p>
<p>In contrast, HTML-in-JS would look a little like this:</p>
<pre><code>const hello = "&lt;div&gt;Hello, world!&lt;/div&gt;"
document.getElementById('app').innerHTML = hello
</code></pre>
<p>And sure, this is something you can do. Just like you could chug a bottle of Tabasco. A friend did that once. He was weird. But I digress.</p>
<p><em>Want to learn more about fundamentals like React.createElement? My <a href="https://reactarmory.com/guides/learn-react-by-itself">Learn React By Itself</a> series was made just for you!</em></p>
<h2>CSS-in-JS</h2>
<p>Another thing a lot of people are talking about lately is CSS-in-JS.</p>
<p>Unfortunately, CSS-in-JS is actually exactly what it sounds like. It is literally CSS in a JavaScript file. Let me repeat that. <em>It is actually CSS in a JavaScript file.</em></p>
<p>The thing is, there are a number of very good reasons we generally put CSS in CSS files (or their LESS/SCSS cousins). For example:</p>
<ul>
<li>Browsers expect to load CSS from CSS files.</li>
<li>Editors have syntax highlighting based on file extension.</li>
<li>Tooling such as minifiers and linters expect CSS.</li>
<li>Existing CSS libraries are written in CSS, LESS or SCSS.</li>
<li>CSS files can be cached separately from JS files.</li>
</ul>
<p>Some CSS-in-JS tools do lots of very clever things to provide workarounds for all of these issues. But if you just use CSS or LESS or SCSS, you don&#8217;t need to provide workarounds. It just works.</p>
<p>Of course, there are supposedly a number of benefits. But most of these benefits can be had from more mature tooling like LESS, SCSS, CSS Modules and Webpack (which you&#8217;ll need anyway to, you know, put your CSS back into CSS files).</p>
<p>There <em>are</em> some benefits that are unique to CSS-in-JS:</p>
<ul>
<li>You can add things like media queries directly to components, whilst you can&#8217;t with standard inline styles. (Yay?)</li>
<li>You can share JavaScript variables with stylesheets. Except that this is is <a href="https://www.styled-components.com/docs/advanced#security">massive security hazard</a>.</li>
</ul>
<p><em>But all the big names are using it, so it has to be good, right?</em></p>
<p>So here&#8217;s the thing: CSS isn&#8217;t perfect. It <em>makes sense</em> that smart people are building alternatives. And the tools <em>do</em> have some compelling use cases &#8212; they&#8217;ll work with react-native, for instance. But unless you 100% know what you&#8217;re getting into, and 100% understand the security implications, I&#8217;d wait a little bit longer before jumping on any bandwagons.</p>
<p><em>I&#8217;ve put a few more details on React Armory in my answer to <a href="https://reactarmory.com/answers/should-i-use-css-in-js">Should I use CSS-in-JS?</a>.</em></p>
<h2>More good news</h2>
<p>Keeping up with JavaScript and React can be exhausting &#8212; but it doesn&#8217;t have to be! The secret is that the basics never change. In fact, my most popular articles are ones I wrote years ago, and they&#8217;re still as relevant as ever.</p>
<p>JavaScript fatigue happens, but you can avoid it by sticking to the basics. And that&#8217;s why my fortnightly newsletter just focuses on the JavaScript and React fundamentals. So subscribe now &#8212; and get a bunch of free PDF cheatsheets as a bonus.</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;">&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;</a>. I&#8217;m looking forward to hearing from you!</p>
<h2>Read more at React Armory</h2>
<ul>
<li><a href="https://reactarmory.com/guides/learn-react-by-itself">Learn React By Itself</a></li>
<li><a href="https://reactarmory.com/answers/should-i-use-css-in-js">Should I use CSS-in-JS?</a></li>
</ul>
<p>The post <a rel="nofollow" href="/css-html-in-js-mistakes/">JSX, HTML-in-JS and CSS-in-JS</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/css-html-in-js-mistakes/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Introducing MDXC: A new way to write Markdown for React</title>
		<link>/introducing-mdxc/</link>
					<comments>/introducing-mdxc/#respond</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Fri, 31 Mar 2017 14:55:13 +0000</pubDate>
				<category><![CDATA[Build Systems]]></category>
		<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<guid isPermaLink="false">/?p=1140</guid>

					<description><![CDATA[<p>Read the README and browse the source on GitHub, or mess around with the live demo. Markdown is a fantastic tool. It makes writing simple. Markdown documents are plain text, so you don&#8217;t need to worry about tags and HTML and all that. You just write. And when you need a &#60;a&#62;, or a &#60;h1&#62;,... <a class="more-link" href="/introducing-mdxc/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/introducing-mdxc/">Introducing MDXC: A new way to write Markdown for React</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><em>Read the README and <a href="https://github.com/jamesknelson/mdxc">browse the source</a> on GitHub, or <a href="https://jamesknelson.com/mdxc">mess around with the live demo</a>.</em></p>
<p>Markdown is a fantastic tool. It makes writing <em>simple</em>. Markdown documents are plain text, so you don&#8217;t need to worry about tags and HTML and all that. You just write. And when you need a <code>&lt;a&gt;</code>, or a <code>&lt;h1&gt;</code>, it&#8217;s already there. It&#8217;s like magic!</p>
<p>But say you&#8217;re writing a React app with <code>pushState</code>, and you don&#8217;t want your links to use <code>&lt;a&gt;</code> tags; they break your smooth navigation. You want them to use react-router or <a href="https://junctions.js.org/">react-junctions&#8217;</a> <code>&lt;Link&gt;</code> tags instead. And you&#8217;re shit outta luck, because you can&#8217;t. Or you couldn&#8217;t, before MDXC.</p>
<p>MDXC is a tool to make Markdown and React best buddies. Unlike traditional Markdown, <strong>MDXC produces actual JavaScript</strong> &#8212; not strings of HTML. <strong>MDXC lets you embed raw JSX within your Markdown</strong>, and even lets you <code>import</code> components and accept <code>props</code>. And to top it all off, <strong>MDXC lets you configure how each element is rendered</strong>, giving you all sorts of ways to confuse your users and also a few ways to genuinely improve their experience.</p>
<p>If you can&#8217;t tell yet, I&#8217;m pretty excited about MDXC. So please indulge me and take a gander at this example:</p>
<p><span id="more-1140"></span></p>
<h2>Example 0: Hello, {yourName}!</h2>
<p>One of the things about React components is that they take props. And since MDXC produces React Components, MDX documents can have props too!</p>
<p>To use a prop within your document, just declare it at the top of your MDX file with a <code>prop &lt;propname&gt;</code> line. Once declared, it will be available within any <code>{brace}</code> expressions.</p>
<p>But how do brace expressions work? Actually, they&#8217;re almost the same as brace expressions in JSX. In fact, when your paragraph starts and ends with a matching pair of tags, they&#8217;re <em>exactly</em> the same &#8212; the entire paragraph is processed as JSX. For example:</p>
<pre><code>prop value
prop onChange

# Hello!

May I kindly ask your name?

&lt;input
  value={value}
  onChange={onChange}
/&gt;

&lt;p&gt;{value &amp;&amp; `Thanks, ${value}!`}&lt;/p&gt;
</code></pre>
<p>MDXC will compile the above document to something like this:</p>
<pre><code>import { createElement, createFactory } from 'react'

export default function({ factories={}, value, onChange }) {
    const wrapper = factories.wrapper || createFactory('div')
    const h1 = factories.h1 || createFactory('h1')
    const p = factories.p || createFactory('p')

    return wrapper({},
        h1({}, 'Hello!'),
        p({}, "May I kindly ask your name?"),
        createElement("input", {
            value: value,
            onChange: onChange
        })
        createElement("p", null, value &amp;&amp; `Thanks, ${value}!`),
    )
}
</code></pre>
<p>But why is it that one of our paragraphs compiles to <code>createElement("p", ...)</code>, while the other compiles to <code>p(...)</code>?</p>
<h2>Factories vs. Elements</h2>
<p>When you use <code>&lt;tags&gt;</code> in an MDX document, they&#8217;re treated exactly like tags in JSX. That is, they&#8217;re compiled to <code>React.createElement(...)</code> calls.</p>
<p>But what about the elements that are generated by Markdown itself; for example, <code>&lt;p&gt;</code> and <code>&lt;h1&gt;</code> elements? As you might have noticed from the example above, this markup is actually produced by <em>factory functions</em>. These functions take <code>props</code> and <code>children</code>, and return a <a href="https://facebook.github.io/react/docs/rendering-elements.html">ReactElement</a>. Each factory function is kind of like a special <code>createElement</code> call for a single type of tag.</p>
<p>The advantage of factory functions is that they&#8217;re <em>configurable</em>. Unfortunately, this does add a teensy bit of complexity to the generated components. But this is ok, because it can also add a whole lot of awesome to your users&#8217; experience.</p>
<h2>Using <code>&lt;Link&gt;</code> components with Markdown</h2>
<p>If you&#8217;re loading content within a React app, then in all likelihood your app is using HTML5 history through a library like <a href="https://reacttraining.com/react-router/web/guides/quick-start">react-router</a> or <a href="https://junctions.js.org/guide">react-junctions</a>.</p>
<p>The great thing about HTML5 history is that it provides a way to navigate without reloading the page. The crap thing about it is that <em>ye olde&#8217; <code>&lt;a&gt;</code> tags will still reload the page</em>.</p>
<p>If you want your content to feel snappy and nice, you&#8217;ll want to use <code>&lt;Link&gt;</code> elements instead. And happily, this is as simple as wrapping your Document component and replacing the default <code>&lt;a&gt;</code> factory with a <code>&lt;Link&gt;</code> factory.</p>
<pre><code>// Assume './document' is a file generated by mdxc
import Document from './document'
import React, { createFactory } from 'react'
import { Link } from 'react-router'

export default function DocumentWrapper(props) {
  return (
    &lt;Document
      {...props}
      factories={{ a: createFactory(Link) }}
    /&gt;
  )
}
</code></pre>
<p>Of course, the usefulness of factories is not limited to links. You can also use them to do cool things like <a href="https://github.com/jamesknelson/mdxc/blob/ee551e91e10bf4f587bc9910fa756763aaa97101/examples/factories.wrapper.jsx">adding anchor links to your headings</a>, or even to replace code blocks with code <em>editors</em>. The world is your burrito.</p>
<p>MDX also let&#8217;s you do a bunch of other cool things &#8212; you can <code>import</code> external React components and even write their children in Markdown! But a reader can only stand so much excitement at once, and the <a href="github.com/jamesknelson/mdxc">docs</a> are waiting for you 24-7. So let&#8217;s move on to how to actually <em>use</em> MDXC.</p>
<h2>How to actually <em>use</em> MDXC</h2>
<p><em>Why, I thought you&#8217;d never ask!</em></p>
<p>A tool wouldn&#8217;t be a tool if it didn&#8217;t include a command-line tool. So let&#8217;s start with the command line tool.</p>
<pre><code># Install the `mdxc` command line tool using npm
&gt; npm install -g mdxc

# Create a boring markdown file for an example
echo '# Hello, World' &gt; example.mdx

# Pass the boring example to the command line tool to compile it
mdxc example.mdx

# You'll forget all this anyway so just use `--help`
mdxc --help
</code></pre>
<p>But with that out of the way, let&#8217;s talk about how you should <em>actually</em> use MDXC.</p>
<h3>Webpack</h3>
<p>If you&#8217;d like to use MDX within an existing React app, chances are you&#8217;ll want to use <strong>mdx-loader</strong>. To do so, just add it to your project and then update the your <code>webpack.config.js</code>. Bear in mind that MDXC outputs ES2015, so you&#8217;ll need to run the output through Babel if you want to support older browsers or Webpack 1.</p>
<pre><code># Add mdx-loader to your project
npm install --save-dev mdx-loader
</code></pre>
<p>Assuming you&#8217;re using Webpack 2, you&#8217;ll need to add an entry to your <code>module.rules</code> array:</p>
<pre><code>module: {
  rules: [
    /**
     * MDX is a tool that converts Markdown files to React components. This 
     * loader uses MDX to create Page objects for Markdown files. As it
     * produces ES2015, the result is then passed through babel.
     */
    { test: /\.mdx?$/,
      use: [
        'babel-loader',
        'mdx-loader',
      ]
    },

    // ...
  ]
},
</code></pre>
<p>Then import and use your components as you&#8217;d do with standard JavaScript!</p>
<p>But what if you haven&#8217;t got an existing React app? Or what if you don&#8217;t want an app, but want a website? In that case, I have another treat for you.</p>
<h3>Sitepack</h3>
<p>MDXC was originally created for Sitepack. But what is Sitepack?</p>
<p><a href="https://github.com/jamesknelson/sitepack">Sitepack</a> is a wrapper around Webpack. It gives you a way to add pages to your website using plain-old <code>require()</code>, it handles the nasty parts of Webpack configuration for you, and it does all this while performing the magic required to build a static HTML version of each of your pages. As it happens, my MDXC and <a href="https://junctions.js.org/">junctions.js</a> websites are built with Sitepack.</p>
<p>Sitepack&#8217;s documentation is still in its infancy (I&#8217;ll let you know via my Newsletter when it improves). But if your plan is to use MDX to write an actual <em>website</em> (you know, with pages and links and no &#8220;login&#8221; button), it is definitely worth trying out. To do so, use the <strong>sitepack-react-starter-kit</strong> &#8212; it supports MDX out of the box.</p>
<pre><code>git clone https://github.com/jamesknelson/sitepack-react-starter-kit.git
cd sitepack-react-starter-kit
npm install
npm start
</code></pre>
<p>Once you&#8217;ve cloned, installed and started your Sitepack website, open your browser at <a href="http://localhost:4000/">http://localhost:4000/</a> and start editing the <code>md</code> files in the <code>content</code> directory &#8212; changes will be reflected live! When you&#8217;re ready to release, build your site with <code>npm run build</code>. You&#8217;ll be a webmaster faster than you can say 1995.</p>
<h3>The API. Or, <code>class MDXC extends MarkdownIt</code></h3>
<p>At its core, MDXC is just a wrapper around the excellent and highly configurable <a href="https://github.com/markdown-it/markdown-it">markdown-it</a> project. This means MDXC has an API. It also means that the API is excellent and highly configurable. But probably not as excellent or highly configurable as markdown-it.</p>
<p>I won&#8217;t go into any more details here, but if you&#8217;re the type of person who likes details then <a href="https://github.com/jamesknelson/mdxc">the README</a> has a little more info.</p>
<h2>Contributing</h2>
<p>MDXC is a young project. That means a lot of it is still pretty shit. Help would be greatly appreciated, especially in the following areas:</p>
<ul>
<li>Improved tests</li>
<li>Refactoring existing code to be prettier and faster</li>
<li>Generating more concise JavaScript output</li>
</ul>
<p>If you&#8217;d like to contribute, you can create an Issue or PR <a href="https://github.com/jamesknelson/mdxc">on GitHub</a>.</p>
<p>But if tests and refactoring aren&#8217;t your thing, I&#8217;d still be pretty darn happy if you use MDXC to make awesome stuff. Or quirky stuff. Or whatever, really. Then tell me about what you&#8217;ve made so I can add it to <a href="https://github.com/jamesknelson/mdxc#mdx-in-the-wild">the list</a>.</p>
<p>Finally, if you&#8217;re not one of the <a href="https://www.youtube.com/watch?v=SiMHTK15Pik">over 9000</a> people who&#8217;ve joined already, <em>join my Newsletter</em>! I don&#8217;t send many e-mails. But when I <em>do</em> send e-mails, they&#8217;re guaranteed to contain useful information and/or tools that you don&#8217;t want to miss. And in return for your e-mail, you&#8217;ll get a bunch of <em>free</em> React and JavaScript cheatsheets the moment you join.</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>Oh, and <em>one more thing</em> &#8211; I love hearing your questions, offers and opinions. If you have something to say, leave a comment or send me an e-mail at <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;">&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;</a>. I&#8217;m looking forward to hearing from you!</p>
<p>The post <a rel="nofollow" href="/introducing-mdxc/">Introducing MDXC: A new way to write Markdown for React</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/introducing-mdxc/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Why I created junctions.js</title>
		<link>/created-junctions-js/</link>
					<comments>/created-junctions-js/#respond</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Mon, 30 Jan 2017 13:38:34 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[Junctions]]></category>
		<category><![CDATA[React]]></category>
		<guid isPermaLink="false">/?p=1118</guid>

					<description><![CDATA[<p>TL;DR? Junctions is a new, composable alternative to react-router. Get it at the junctions.js website! It was pretty normal day in Tokyo when I received a request from a client. &#8220;I&#8217;d like this application screen to be a React Component. And I want it to be reusable.&#8221; Given my client&#8217;s app was created with React,... <a class="more-link" href="/created-junctions-js/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/created-junctions-js/">Why I created junctions.js</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><strong>TL;DR? Junctions is a new, composable alternative to react-router. Get it at the <a href="https://junctions.js.org/">junctions.js website</a>!</strong></p>
<p>It was pretty normal day in Tokyo when I received a request from a client. &#8220;I&#8217;d like this application screen to be a React Component. And I want it to be reusable.&#8221;</p>
<p>Given my client&#8217;s app was created with React, I naturally said &#8220;Yes Sir&#8221;. I mean, the best part about React is that components are reusable. What could go wrong?</p>
<p><span id="more-1118"></span></p>
<p>The answer is <em>Links</em>. Links are what could go wrong.</p>
<p>You see, the thing about the <em>web</em> is that it is made of URLs. And the thing about URLs is that they don&#8217;t compose. But reusable components need to compose!</p>
<p>To demonstrate, imagine that you&#8217;d like to make a self contained <code>PaymentsScreen</code> component, like so:</p>
<pre><code>class PaymentsScreen extends Component {
    static propTypes = {
        path: PropTypes.oneOf(['/new', '/list']),
    }

    render() {
        return (
            &lt;div&gt;
                &lt;nav&gt;
                    &lt;a href='/new'&gt;Add Payment&lt;/a&gt;
                    &lt;a href='/list'&gt;List&lt;/a&gt;
                &lt;/nav&gt;
                &lt;div&gt;
                    Hi!
                &lt;/div&gt;
            &lt;/div&gt;
        )
    }
}
</code></pre>
<p>Easy, right? Except &#8212; what if you then want to mount this component somewhere other than the application root? The <code>&lt;a&gt;</code> tags are going to break.</p>
<p>But you&#8217;ve got you&#8217;re head screwed on, so you know how to fix this. Just pass in a <code>basePath</code>.</p>
<pre><code>&lt;a href=`${basePath}/new`&gt;Add Payment&lt;/a&gt;
&lt;a href=`${basePath}/list`&gt;List&lt;/a&gt;
</code></pre>
<p>And this works. Until you want to mount this component within a modal which doesn&#8217;t <em>have</em> URLs. <em>Don&#8217;t mount it in a modal, you say</em>. But your client insists. Now what?</p>
<p><em>You&#8217;re up the creek with no paddle.</em> That&#8217;s what.</p>
<h2>Components With URLs Aren&#8217;t Reusable</h2>
<p>Routable components have Links. Links point to URLs. And URLs cause components to be dependent on their environment. <em>So perhaps we should just give up on reusability for any components with links?</em></p>
<p>But wait a minute. The great thing about React is that it lets you write reusable components. And one of the great things about the web is that all its content has URLs. So wouldn&#8217;t it be ideal if you could have your cake and eat it too?</p>
<p>Happily, the answer is that you <em>can</em> have your cake and eat it too. That&#8217;s the beauty of <a href="https://junctions.js.org/">junctions.js</a>, the tool I created to solve this problem.</p>
<p><strong>Junctions.js is a router built from the ground up for component-based applications.</strong></p>
<p>With junctions, you can create reusable React components that define their own routes and links. Junctions does the work to compose these components. Your components will integrate seamlessly with the browser History API. <em>You&#8217;ll get routing that works with React instead of fighting against it.</em></p>
<p>So how does this all work? That&#8217;s a great question, and its one I answer in the <a href="https://junctions.js.org/guide">tutorial and guide</a>. In fact, this blog post is extracted from the <em>Motivation</em> page in that same guide.</p>
<p>The thing is, I&#8217;m so excited about Junctions that I really want to share it with you right now. It has solved a number of problems for me in my daily work, and I hope you&#8217;ll find similar value in it. The caveat is that the Guide is still a little WIP. So if you&#8217;d like to contribute, open an <a href="https://github.com/jamesknelson/junctions/issues">issue</a> and let&#8217;s talk! Otherwise, join my newsletter to be the first to hear when the documentation reaches its final polished state &#8212; and to get five free ReactJS and JavaScript Cheatsheets!</p>
<p><em>P.S. If you&#8217;d like to see more work on Junctions, make sure to <a href="https://github.com/jamesknelson/junctions">star it on GitHub</a>!</em></p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>The post <a rel="nofollow" href="/created-junctions-js/">Why I created junctions.js</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/created-junctions-js/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Do I Even Need A Routing Library?</title>
		<link>/even-need-routing-library/</link>
					<comments>/even-need-routing-library/#respond</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Thu, 03 Nov 2016 12:46:56 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[Junctions]]></category>
		<category><![CDATA[React]]></category>
		<guid isPermaLink="false">/?p=1106</guid>

					<description><![CDATA[<p>So you&#8217;ve decided to build a React app. It has a few screens, so you need a router. And react-router seems pretty popular, so you npm install it and put together a quick demo. Everything seems fine and dandy! Or it did, until you googled for some docs the next day. Something seems off. The... <a class="more-link" href="/even-need-routing-library/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/even-need-routing-library/">Do I Even Need A Routing Library?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>So you&#8217;ve decided to build a React app. It has a few screens, so you need a router. And <a href="https://github.com/ReactTraining/react-router">react-router</a> seems pretty popular, so you <code>npm install</code> it and put together a quick demo. Everything seems fine and dandy!</p>
<p>Or it did, until you googled for some docs the next day. Something seems off. The logo has changed colour from blue to red. And the version number has mysteriously increased from 2 to <strong><em>4</em></strong>. Huh?</p>
<p>Well at least it didn&#8217;t jump to 5. But this makes you think &#8212; <em>do I really even need a routing library?</em> Imagine if we lived in a world without JavaScript fatigue where the APIs never change and we could just focus on making awesome stuff. But actually &#8211; we kind of do! The browser APIs rarely change. And how much longer could it take to just use <em>them</em> instead of some complicated library?</p>
<p><span id="more-1106"></span></p>
<h2>What Routers Do</h2>
<p>The first step to understand whether you need a routing library is to understand what routing libraries do. Which is something along the lines of:</p>
<ul>
<li>Smooth over inconsistencies between browsers</li>
<li>Provide helpers for working with React</li>
<li>Respond to browser navigation events</li>
</ul>
<p>Of course, most routing libraries do a lot more. But we probably don&#8217;t <em>need</em> features like loading entire scripts dynamically or JSX-based definitions of available routes. So let&#8217;s keep to the basics as we go over the details.</p>
<h3>Smoothing over inconsistencies between browsers</h3>
<p>While modern web browsers supposedly all respect the same standards, the reality is that each browser still has its own quirks. Not to mention that the standards sometimes leave a little room for interpretation.</p>
<p>One example is the <a href="https://developer.mozilla.org/en-US/docs/Web/Events/popstate">popstate</a> event. The browser emits this every time time the location changes. Or at least some browsers do; Chrome and Firefox also emit it on load, while safari doesn&#8217;t. And none of the browsers emit it when <em>you</em> change the state by calling <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API#The_pushState()_method">pushState()</a>.</p>
<p>To write a router using the browser&#8217;s raw History API, we&#8217;d need to smooth over all these differences. And even then, our application shouldn&#8217;t care <em>why</em> the location changed &#8212; it should respond to navigation events regardless. Given all this, it seems like the browser API is going to make life difficult for us. So does that mean we need a routing library? Kind of. But kind of not.</p>
<p><em>It means we need a browser inconsistency smoothing library.</em></p>
<p>And thats what the <a href="https://github.com/mjackson/history">history</a> package is for. <a href="https://github.com/ReactTraining/react-router">react-router</a> uses it internally, but it is a completely independent library. And it is a very useful library too. It lets you avoid all the browser inconsistencies by sticking to this pretty simple API:</p>
<pre><code>import createHistory from 'history/createBrowserHistory'
const history = createHistory()

function handleNavigation(location) {
  console.log(location.pathname)
}

// Handle the initial location
handleNavigation(history.location)

// Handle subsequent navigation events
history.listen(handleNavigation)
</code></pre>
<p>Ok, so with history, we now have access to the latest location. But these history objects present a new problem: <code>&lt;a&gt;</code> tags don&#8217;t work with the History API. In fact, every time we click an <code>&lt;a&gt;</code> which holds anything other than a hash fragment like <code>#butterflies</code>, the entire page reloads! In order to navigate without a page reload, we&#8217;ll need to call <code>history.push()</code>. And to do that, a routing library will often supply some tools.</p>
<h3>Helpers for working with React</h3>
<p>Because of the situation with <code>&lt;a&gt;</code> not working with push state, you&#8217;ll find that routing libraries include a fix. This commonly takes the form of a <code>&lt;Link&gt;</code> component &#8212; which renders an <code>&lt;a&gt;</code>, but adds an <code>onClick</code> handler to capture any clicks and redirect them to <code>history.push()</code>. In practice, this looks something like this:</p>
<pre><code>class Link extends React.component {
  constructor(props) {
    super(props)

    // The `bind` is necessary to make `this` work within the `handleClick`  
    this.handleClick = this.handleClick.bind(this)
  }

  handleClick(event) {
    if (event.defaultPrevented ||
        isModifiedEvent(event) ||
        !isLeftClickEvent(event)) {
      return
    }

    event.preventDefault()

    // It only makes sense for an application to have one history, so we can
    // make it global
    history.push(this.props.to)
  }

  render() {
    var props = Object.assign({}, this.props)

    delete this.props.to

    props.onClick = this.handleClick
    props.href = this.props.to.pathname + (this.props.to.search || '')

    return &lt;a {...props}&gt;{props.children}&lt;/a&gt;
  }
}
</code></pre>
<p>A full featured implementation of <code>&lt;Link&gt;</code> will probably want a few extra features; for example, accepting a <code>history</code> object from <a href="https://facebook.github.io/react/docs/context.html">Context</a>. But even with these features, <code>&lt;Link&gt;</code> doesn&#8217;t need to be hugely complicated. After all, <code>&lt;a&gt;</code> isn&#8217;t hugely complicated either.</p>
<p>And while most routing libraries will probably provide some other bits and pieces, it is unlikely you&#8217;ll actually need them. I mean, you don&#8217;t even really need a <code>&lt;Link&gt;</code> component; if you use a <a href="/push-state-vs-hash-based-routing-with-react-js/">hash based</a> router instead, then you&#8217;ll be fine without it. But assuming you&#8217;re using push state, it isn&#8217;t a huge problem to just roll your own.</p>
<p>So maybe we don&#8217;t need a routing library? But there is still one thing we need to take care of. Even if we can render <code>&lt;Link&gt;</code> tags and receive notification when the user navigates, we still don&#8217;t know what to actually <em>do</em> with the received locations.</p>
<h3>Responding to browser navigation events</h3>
<p>Given we have a <code>history.listen()</code> handler, our application is going to receive a series <code>location</code> objects. Each one looks something like this:</p>
<pre><code>{
  pathname: '/todos',
  search: '?page=2',
  state: {
    some_arbitrary_stuff: 'äººå'
  }
}
</code></pre>
<p>You can think of these locations as one way of specifying what the application should render. For example, the object above may specify that we&#8217;d like to see page two of a <em>Todos</em> screen. Easy, right?</p>
<p>But let me ask you a question. Given the user has just clicked a <code>&lt;Link&gt;</code> and we&#8217;ve received this new location, <em>how does React know what to actually render</em>? And this brings up another question: <em>how does React even know it has to re-render?</em></p>
<h4>Telling React about location changes</h4>
<p>One of the best things about React is that it is pretty dumb. It doesn&#8217;t try and guess when things like your location change. You need to tell it.</p>
<p>The most common way of doing so is with a component&#8217;s <a href="https://facebook.github.io/react/docs/react-component.html#setstate">setState()</a> method. But in order to use <code>setState()</code> from within our navigation handler, our handler will need to have access to <code>setState()</code>. And this means that we&#8217;ll need to create the handler function and pass it to <code>history.listen()</code> within the component itself. Like this:</p>
<pre><code>class Application extends React.Component {
  constructor(props) {
    super(props)

    this.state = {
      location: history.location
    }

    history.listen(this.handleNavigation.bind(this))
  }

  handleNavigation(location) {
    this.setState({
      location: location,
    })
  }

  // ...
}
</code></pre>
<p>With this, you can now always access the most recent location at <code>this.state.location</code>. So the obvious question is: what should you actually do with it?</p>
<h4>Rendering your routes</h4>
<p>In React, rendering your routes is really no different to rendering anything else. You just take the location at <code>this.state.location</code>, and return an element based on its value. Like this:</p>
<pre><code>render() {
  const pathname = this.state.location.pathname

  if (pathname === '/todos') {
    return &lt;Todos search={this.state.location.search} /&gt;
  }
  else if (pathname === '/reminders') {
    return &lt;Reminders search={this.state.location.search} /&gt;
  }
  else {
    return &lt;NotFound /&gt;
  }
}
</code></pre>
<p>Simple, right? Or at least, simple so long as we don&#8217;t add a bunch more routes. Once your application starts to grow in size, you&#8217;re going to want to find a better way of processing the location than a giant <code>if-else</code> or <code>switch</code> statement. And that is going to mean a better way of representing the Location than two gnarly strings.</p>
<p>The thing about the two strings you get from a <code>Location</code> object is they&#8217;re made that way due to browser limitations. The browser has a URL bar, so your application receives URLs &#8212; even if it would make way more sense to receive some sort of <em>Route</em> object which matches the structure of your application.</p>
<p>This is where routing libraries really do shine &#8212; they can convert <code>Location</code> objects into something more useful. Or to put it another way, good libraries add useful functionality. They don&#8217;t replace it.</p>
<h2>To Route Or Not To Route</h2>
<p>But to return to the original question; <em>do I even need a routing library?</em> The answer is (of course) it depends.</p>
<p>Are you writing a simple application where you&#8217;ve got few enough URLs that a simple <code>&lt;Application&gt;</code> component is easily comprehensible? Then you probably don&#8217;t need a routing library. Using the history package with a custom <code>&lt;Link&gt;</code> component is nice and simple. And if your application grows, you can always add appropriate tools down the track.</p>
<p>But maybe your URLs are complex enough that you&#8217;d like to break them down into more manageable parts. Or maybe you want individual screens to manage their own routes &#8212; as opposed to a single application-wide <code>&lt;Application&gt;</code> component. In this case, it might make sense to use a library. <em>But you don&#8217;t need to use react-router.</em></p>
<p>One of the best parts of the JavaScript ecosystem is how it lets you take only the bits you need for the job. And routing is no exception!</p>
<p>With this in mind, my recommendation is:</p>
<ul>
<li>Use the <a href="https://github.com/mjackson/history">history</a> package to smooth out interaction with the browser</li>
<li>If your application is large enough to justify it, use <a href="https://junctions.js.org/">Junctions</a> to convert <code>Location</code> objects into <code>Route</code> objects, which better match your application structure</li>
</ul>
<p>You probably don&#8217;t need the rest of the stuff that you&#8217;d get from react-router, like JSX routes, dynamic code loading or a <code>&lt;Router&gt;</code> component which gets in the way of your prop passing.</p>
<p><em>But wait a moment!</em> Where did this Junctions package come from?</p>
<h2>Junctions</h2>
<p>Junctions is a tool I&#8217;ve been using for the last 6 months to convert Locations into Routes. It avoids the complexity of react-router by doing one thing, and doing it well. In fact, I&#8217;ve found it to be so useful that I&#8217;ve recently made it <a href="https://github.com/jamesknelson/junctions/">open source</a>. If you&#8217;re adventurous, you can already give it a shot. But the documentation is still WIP, so if you&#8217;d like to get the guided tour, join my newsletter to receive the following over the coming weeks:</p>
<ul>
<li>A guide to the difference between Routes and Locations</li>
<li>A guide to Junctions (the tool which defines your application structure)</li>
<li>An update to my Starter Kit using Redux and Junctions</li>
</ul>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="mailto:james@jamesknelson.com">james@jamesknelson.com</a>. Or, if you&#8217;ve got any questions or comments about junctions, <a href="https://github.com/jamesknelson/junctions/">create an issue</a>. I&#8217;m looking forward to hearing from you!</p>
<p>The post <a rel="nofollow" href="/even-need-routing-library/">Do I Even Need A Routing Library?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/even-need-routing-library/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Why use parenthesis on JavaScript return statements?</title>
		<link>/javascript-return-parenthesis/</link>
					<comments>/javascript-return-parenthesis/#comments</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Thu, 11 Aug 2016 02:58:06 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<guid isPermaLink="false">/?p=1051</guid>

					<description><![CDATA[<p>A while back, I received a great question from a reader: Just a note in your Learn React By Itself tutorial. In the &#8220;Components&#8221; section, where you say: return ( React.createElement('li', {className: 'Contact'}, React.createElement('h2', {className: 'Contact-name'}, this.props.name) ) ) It&#8217;s not clear to me why you need the parens and can&#8217;t just do return React.createElement.... <a class="more-link" href="/javascript-return-parenthesis/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/javascript-return-parenthesis/">Why use parenthesis on JavaScript return statements?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>A while back, I received a great question from a reader:</p>
<p><em>Just a note in your <a href="/learn-raw-react-no-jsx-flux-es6-webpack/">Learn React By Itself</a> tutorial. In the &#8220;Components&#8221; section, where you say:</em></p>
<pre><code>return (
  React.createElement('li', {className: 'Contact'},
    React.createElement('h2', {className: 'Contact-name'}, this.props.name)
  )
)
</code></pre>
<p><em>It&#8217;s not clear to me why you need the parens and can&#8217;t just do <code>return React.createElement</code>. I tried that and it fails but I can&#8217;t see why. Isn&#8217;t <code>typeof x === typeof (x)</code> in JavaScript?</em></p>
<p>And while it is true that <code>typeof x === typeof (x)</code>, the same doesn&#8217;t always hold for <code>return</code>. Why?</p>
<p><span id="more-1051"></span></p>
<p>There are two things about JavaScript&#8217;s <code>return</code> which are a little unintuitive:</p>
<ol>
<li>
<p>A <code>return</code> statement followed by unreachable code is perfectly valid</p>
<pre><code>function doSomething() {
    return

    // Valid, but will never be called
    doSomethingElse()
}
</code></pre>
</li>
<li>
<p>JavaScript will automatically insert a semicolon at the first possible opportunity on a line after a <code>return</code> statement</p>
</li>
</ol>
<p>The second bit might be a little hard to grok, so let&#8217;s do a quiz. Can you tell me where the semicolon will be inserted on this block of code?</p>
<pre><code>return
  React.createElement('li', {className: 'Contact'},
    React.createElement('h2', {className: 'Contact-name'}, this.props.name)
  )
</code></pre>
<p>Once you think you&#8217;ve got the answer, touch or hover your mouse over this box to check:</p>
<div class="spoiler">
<div class="spoiler-mask"></div>
</p>
<pre><code>// JavaScript inserts a semicolon after the `return` statement! 
return; 

  React.createElement('li', {className: 'Contact'},
    React.createElement('h2', {className: 'Contact-name'}, this.props.name)
  )
</code></pre>
<p>
</div>
<p>Got it? If not, go over the two rules above until you convince yourself.</p>
<p>So, back to the original question: why use brackets on a <code>return</code> statement? Well, if you place your opening bracket on the same line as <code>return</code>:</p>
<pre><code>return (
</code></pre>
<p>No semicolon can be automatically inserted until that bracket is closed.</p>
<pre><code>return (
    ...
) // &lt;-- JavaScript inserts semicolon here
</code></pre>
<p>Of course, we could just place the <code>React.createElement</code> on the same line as <code>return</code>, and avoid these superfluous brackets. But then it wouldn&#8217;t look as pretty.</p>
<p><strong>tl;dr</strong></p>
<p><em>If possible, JavaScript will automatically insert a semicolon at the end of the line which the <code>return</code> statement is on. Use brackets to make it impossible.</em></p>
<p>Want to see this in action? Check out my <a href="/learn-raw-react-no-jsx-flux-es6-webpack/">Learn Raw React</a> series &#8212; and become a React pro while you&#8217;re at it.</p>
<h2>Learn more about JavaScript</h2>
<p>Need to know all the ins and outs of JavaScript? Just keep reading:</p>
<ul>
<li><a href="/es6-the-bits-youll-actually-use/">ES6 &#8211; The bits you&#8217;ll actually use</a></li>
<li><a href="/grokking-es6-promises-the-four-functions-you-need-to-avoid-callback-hell/">An Introduction to Promises</a></li>
<li><a href="/demystifying-javascript-the-many-faces-of-this/">Understanding JavaScript &#8216;this&#8217;</a></li>
</ul>
<p>Need help remembering all this? My newsletter subscribers receive <em>free</em> cheatsheets on ES6, Promises and React, as well as news on my latest resources. Sign up here:</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;">&#x6a;&#97;&#109;&#101;&#115;&#64;&#106;&#97;&#109;&#101;&#115;k&#x6e;&#x65;&#x6c;&#x73;&#x6f;&#x6e;&#x2e;&#x63;&#x6f;&#109;</a>. I&#8217;m looking forward to hearing from you!</p>
<p>The post <a rel="nofollow" href="/javascript-return-parenthesis/">Why use parenthesis on JavaScript return statements?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/javascript-return-parenthesis/feed/</wfw:commentRss>
			<slash:comments>5</slash:comments>
		
		
			</item>
		<item>
		<title>State of React #2 &#8211; From Inception to Redux</title>
		<link>/state-react-2-inception-redux/</link>
					<comments>/state-react-2-inception-redux/#comments</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Sat, 06 Aug 2016 09:12:58 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<category><![CDATA[Redux]]></category>
		<category><![CDATA[State Of React]]></category>
		<guid isPermaLink="false">/?p=1039</guid>

					<description><![CDATA[<p>Welcome back to the second instalment of State of React! In case you missed it, the first instalment demonstrated a small app without component state. And it received a bunch of interesting responses, like this one from @metapgmr: using props as state and claiming that components are &#8230; stateless! The React Emperor has no clothes... <a class="more-link" href="/state-react-2-inception-redux/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/state-react-2-inception-redux/">State of React #2 &#8211; From Inception to Redux</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>Welcome back to the second instalment of State of React! In case you missed it, the <a href="/state-react-1-stateless-react-app/">first instalment</a> demonstrated <a href="https://jsfiddle.net/jamesknelson/8acuh8e0/1/">a small app</a> without component state. And it received a bunch of interesting responses, like this one from <a href="https://twitter.com/metapgmr">@metapgmr</a>:</p>
<blockquote>
<p>using props as state and claiming that components are &#8230; stateless! The React Emperor has no clothes</p>
</blockquote>
<p>Yes, the app was basically wearing its birthday suit. And yes, the app <em>did</em> contain state. But no, the state wasn&#8217;t in the props &#8211; and it wasn&#8217;t component state either.</p>
<p>So what was it?</p>
<p><span id="more-1039"></span></p>
<p>In case you missed it, here is the &#8220;React Inception&#8221; pattern (thanks for the great name, <a href="https://twitter.com/mctaylorpants/status/761002705762471936">@mctaylorpants</a>):</p>
<pre><code>class CommentForm extends React.Component {
    static propTypes = {
        value: React.PropTypes.object.isRequired,
        onChange: React.PropTypes.func.isRequired,
    }

    handleChange(field, e) {
        this.props.onChange({
            ...this.props.value,
            [field]: e.target.value,
        })
    }

    render() {
        return (
            &lt;div&gt;
                &lt;input
                    placeholder="Name"
                    value={this.props.value.name}
                    onChange={this.handleChange.bind(this, 'name')}
                /&gt;
                &lt;input
                    placeholder="Message"
                    value={this.props.value.message}
                    onChange={this.handleChange.bind(this, 'message')}
                /&gt;
            &lt;/div&gt;
        )
    }
}

// Handle updated values by re-rendering the app
function render(value) {
    ReactDOM.render(
        &lt;CommentForm
            value={value}
            onChange={render}
        /&gt;,
        document.getElementById("react-app")
    )
}

// Initialise the app by rendering it
render({
    name: "James",
    message: "",
})
</code></pre>
<p>Think you know where the state is stored? Check your answer by touching or hovering your mouse over this box:</p>
<div class="spoiler">
<div class="spoiler-mask"></div>
The state is stored in the DOM. By calling <code>ReactDOM.render</code> with the new value, we write it to the DOM. The DOM then merges it with the requested changes on every keystroke, and passes it back to the app via an <code>onChange</code> handler.
</div>
<p>Okay. So the app isn&#8217;t stateless. That means the pattern is basically useless, right?</p>
<p>Not so fast. As I mentioned last week, having all our state in one place is pretty handy. But that brings us to the bonus question:</p>
<h2>So why don&#8217;t people do this?</h2>
<p>I&#8217;d try and explain this, but Joe Shelby beat me to the punch in a <a href="/state-react-1-stateless-react-app/#comment-22402">comment</a> on last week&#8217;s article:</p>
<blockquote>
<p>When you get to large apps, having EVERY single component look through the part of the âvalueâ object to see if anything has changed would be impressively slow.</p>
</blockquote>
<p>To get an idea of why this is, you need to remember that every JSX statement in a React file is <a href="/learned-stop-worrying-love-jsx/">actually a function call</a>, which creates a <code>ReactElement</code> object.</p>
<p>By rendering your page from the root, you need to run the <code>render</code> method of every component on your page. Which will <em>then</em> create a new <code>ReactElement</code> object for every JSX element on your page. <em>Which will then then be diffed with all the React Elements on the previous version of your page</em>. And all you wanted to do was add an <code>active</code> class to your spinner div.</p>
<p>This is a big reason why people use <code>setState</code> in the real world. <code>setState</code> lets you update a <em>subtree</em> of your react app, without re-rendering the whole thing. But it also lets you use react-router.</p>
<h2>What has react-router got to do with <code>setState</code>?</h2>
<p>If you&#8217;ve ever used <a href="https://github.com/reactjs/react-router">react-router</a>, one of the things you may have noticed is that it doesn&#8217;t let you pass <code>props</code> to your components. Instead, you need to pass components. Here is an example from the docs:</p>
<pre><code>ReactDOM.render((
  &lt;Router history={browserHistory}&gt;
    &lt;Route path="/" component={App}&gt;
      &lt;Route path="about" component={About}/&gt;
      &lt;Route path="*" component={NoMatch}/&gt;
    &lt;/Route&gt;
  &lt;/Router&gt;
), document.getElementById('root'))
</code></pre>
<p>In this example, <code>App</code>, <code>About</code> and <code>NoMatch</code> are all React Components &#8211; i.e. the objects returned by <code>React.createClass</code>, or classes which extend <code>React.Component</code>. By passing components to routes, you&#8217;re able to easily configure routes at the very root of your application. But by <em>only</em> being able to pass components to routes, you also lose the ability to pass props from the parent component without using <code>context</code>.</p>
<p>I&#8217;m not going to get into the merits/demerits of designing a router this way. But I will say that one consequence of doing things this way is that it removes the possibility of building your app using props passed all the way from the root. This means that the React Inception pattern <em>won&#8217;t work</em>. And honestly, this probably factors more into people&#8217;s decision to avoid the pattern than performance does.</p>
<p>So to summarise &#8211; the React Inception pattern is a fun novelty which doesn&#8217;t really have any place in the real world. Except that you may already be using it without realising it &#8212; just modified in a way to negate these issues.</p>
<h2>Making React Inception Useful</h2>
<p>To fix the two issues mentioned above, we&#8217;ll need to make two changes:</p>
<ol>
<li>We&#8217;ll need to split our <code>render</code> function into two parts &#8212; one to <em>make</em> changes to state, and one to <em>handle</em> changes in that state.</li>
<li>We&#8217;ll need to make it possible to <em>update</em> the state instead of <em>replacing</em> it, as updates from one part of the application shouldn&#8217;t affect state used by other parts of the application.</li>
</ol>
<p>Simple, right? And the implementation is even simpler:</p>
<pre><code>class Store {
  constructor() {
    this.listeners = []
    this.state = {}
  }

  subscribe(listener) {
    this.listeners.push(listener)

    // Return a function allowing us to unsubscribe
    return () =&gt; this.listeners.splice(this.listeners.indexOf(listener), 1)
  }

  updateState = (updates) =&gt; {
    this.state = Object.assign({}, this.state, updates)
    for (let listener of this.listeners) {
      listener(this.state)
    }
  }
}

const store = new Store()
</code></pre>
<p>To use the <code>store</code>, pass its <code>updateState</code> method through to components which need to store state. And then use <code>subscribe</code> to pass the latest version of the state into the components.</p>
<p>As an example, this is how we&#8217;d implement our familiar React Inception pattern using a <code>Store</code>:</p>
<pre><code>store.subscribe(state =&gt; {
  ReactDOM.render(
    &lt;CommentForm
        value={state}
        onChange={store.updateState}
    /&gt;,
    document.getElementById("react-app")
  )
})

// Set initial state
store.updateState({
    name: "James",
    message: "",
})
</code></pre>
<p>But this just makes our existing code more complicated. What we <em>really</em> want to do is connect our store up to a component <em>inside</em> the application, speeding up our app and getting our data past react-router without using <code>props</code>.</p>
<p>To do so, let&#8217;s follow Dan Abramov&#8217;s <a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.rjjwfiegh">Containers pattern</a>. This is akin to creating a &#8220;sub-application&#8221; which uses <code>setState</code> to store the data for a group of state-free child components &#8212; like the <code>CommentForm</code> from our previous app.</p>
<pre><code>class CommentFormContainer extends React.Component {
  componentDidMount() {
    this.unsubscribe = store.subscribe(state =&gt; {
      this.setState(state.CommentFormContainer)
    })
  }

  componentWillUnmount() {
    if (this.unsubscribe) {
      this.unsubscribe()
    }
  }

  handleChange(value) {
    store.updateState({ CommentFormContainer: value })
  }

  render() {
    return (
      &lt;CommentForm
        value={this.state}
        onChange={this.handleChange}
      /&gt;
    )
  }
}
</code></pre>
<p>Now place this Container somewhere inside an existing application and <em>presto</em> &#8212; (almost) stateless sub-app.</p>
<h2>Wait a moment &#8211; haven&#8217;t I seen this before?</h2>
<p>Container components? Aren&#8217;t they a Redux thing? And stores with a <code>subscribe</code> method which hold the application state at the root of the app?</p>
<p>So I admit it. I&#8217;ve basically made a shit version of Redux.</p>
<p>Honestly, I wouldn&#8217;t use the code I&#8217;ve written above &#8212; Redux is better. Reasons:</p>
<ul>
<li>Instead of allowing direct mutation of the stored state, it forces you to write <a href="https://redux.js.org/docs/basics/Actions.html">actions</a> and <a href="https://redux.js.org/docs/basics/Reducers.html">reducers</a> which make it easier to understand what-the-hell is going on.</li>
<li>Redux gives you the <code>connect</code> function to automate creation of container components (my container above is based on the internals of <code>connect</code>).</li>
<li>It gives you extensibility via <a href="https://redux.js.org/docs/advanced/Middleware.html">middleware</a>, and a whole bunch of neat <a href="https://github.com/gaearon/redux-devtools">tooling</a>.</li>
</ul>
<p>So what I&#8217;m saying is that if you want to manage state, <em>Redux is the bees knees</em>. By putting it all in one place, it becomes possible to share state between Containers and cache data between page views. And by keeping most of your components stateless, testing and design becomes a breeze.</p>
<p>But while Redux does a great job of <em>managing</em> your state, it still leaves you with the problem of <em>structuring</em> it.</p>
<h1>5 Types of state</h1>
<p>I have a theory: to understand how to <em>structure</em> state, you first need to understand where the state actually is.</p>
<p>As far as I can tell, there are five types of state &#8212; and the best way to structure state depends on which of the types it falls under.</p>
<p>Want to find out what the types are, and the patterns for structuring them? Then subscribe to my newsletter now to make sure you don&#8217;t miss the next instalment of State of React! And in return for your e-mail, you&#8217;ll immediately receive <em>five</em> free ReactJS and JavaScript cheatsheets!</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="mailto:james@jamesknelson.com">james@jamesknelson.com</a>. I&#8217;m looking forward to hearing from you!</p>
<p>The post <a rel="nofollow" href="/state-react-2-inception-redux/">State of React #2 &#8211; From Inception to Redux</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/state-react-2-inception-redux/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>State of React #1: A Stateless React App?</title>
		<link>/state-react-1-stateless-react-app/</link>
					<comments>/state-react-1-stateless-react-app/#comments</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Sun, 31 Jul 2016 07:14:39 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<category><![CDATA[State Of React]]></category>
		<guid isPermaLink="false">/?p=1031</guid>

					<description><![CDATA[<p>Have you ever been frustrated with the task of making loading spinners appear at the right time? Or maybe you&#8217;ve had trouble making a popup appear when and where you want it? These are both signs that your code suffers from unmanaged state &#8212; the bane of basically every web developer on the planet. And... <a class="more-link" href="/state-react-1-stateless-react-app/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/state-react-1-stateless-react-app/">State of React #1: A Stateless React App?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>Have you ever been frustrated with the task of making loading spinners appear at the right time? Or maybe you&#8217;ve had trouble making a popup appear when and where you want it? These are both signs that your code suffers from <em>unmanaged state</em> &#8212; the bane of basically every web developer on the planet.</p>
<p>And luckily, the React ecosystem is brimming with tools to help. <a href="https://redux.js.org/">Redux</a>, <a href="https://mobxjs.github.io/mobx/">MobX</a>, <a href="https://facebook.github.io/react/docs/flux-overview.html">Flux</a> and <a href="https://qiita.com/kimagure/items/22cf4bb2a967fcba376e">RxJS</a> are just a few. And while they have a number of things in common (including for some reason the letter &#8220;x&#8221;), the one which stands out the most is that they just convert the problem of &#8220;managing&#8221; state into the problem of &#8220;structuring it&#8221;.</p>
<p>But if it seems that there is no way to dull the state of pain, it begs the question &#8212; instead of <em>managing</em> our state, why don&#8217;t we just avoid it?</p>
<p><span id="more-1031"></span></p>
<h2>But how?</h2>
<p>Well, given a React app generally stores most of its state with <code>setState</code>, it stands to reason that the first thing we&#8217;d want to do is ban it.</p>
<p>By definition, this means that if we had a form, we&#8217;d need to pass any changes back up to the root of the application via callbacks. And we&#8217;d also need to pass any new values down the tree via <code>props</code>.</p>
<p>We&#8217;d also rule out the use of <a href="https://facebook.github.io/react/docs/forms.html#uncontrolled-components">uncontrolled components</a>, as they&#8217;re inherently stateful.</p>
<p>This would leave something like this:</p>
<pre><code>class CommentForm extends React.Component {
    static propTypes = {
        value: React.PropTypes.object.isRequired,
        onChange: React.PropTypes.func.isRequired,
    }

    handleChange(field, e) {
        this.props.onChange({
            ...this.props.value,
            [field]: e.target.value,
        })
    }

    render() {
        return (
            &lt;div&gt;
                &lt;input
                    placeholder="Name"
                    value={this.props.value.name}
                    onChange={this.handleChange.bind(this, 'name')}
                /&gt;
                &lt;input
                    placeholder="Message"
                    value={this.props.value.message}
                    onChange={this.handleChange.bind(this, 'message')}
                /&gt;
            &lt;/div&gt;
        )
    }
}
</code></pre>
<h2>It&#8217;s a form? No wait, it&#8217;s an input?</h2>
<p>Notice how the <code>ContactForm</code> has the same signature as the inputs inside it? By structuring our format to take and emit Contact objects via its <code>value</code> prop and <code>onChange</code> callback, we&#8217;ve basically made a &#8220;Contact Input&#8221;. This form is to Contact objects as an <code>&lt;input&gt;</code> is to strings.</p>
<p>By itself, this is nothing special &#8211; but let me throw this at you. If a Contact input can be created from a number of string inputs, can an Invoice input be created from a Contact input, a number of Line Item inputs, and etc.?</p>
<p>The answer, of course, is yes. And the cool part is that this pattern isn&#8217;t just limited to forms. For example, we could use a similar pattern of nested callbacks and objects to hold an entire application worth of data.</p>
<p>But whether we&#8217;ve banned <code>setState</code> from a single form or an entire application, we&#8217;re still going to have <code>props</code> on the root object which hold the app&#8217;s callbacks and data:</p>
<pre><code>ReactDOM.render(
    &lt;CommentForm
        value={...}
        onChange={...}
    /&gt;,
    document.getElementById("react-app")
)
</code></pre>
<p>And whatever are we going to do with these?</p>
<h2>Takes a value, emits changed values</h2>
<p>Well, since our <code>value</code> prop takes exactly the same format as the <code>onChange</code> callback emits, why don&#8217;t we just plug them into each other?</p>
<pre><code>// Handle updated values by re-rendering the app
function render(value) {
    ReactDOM.render(
        &lt;CommentForm
            value={value}
            onChange={render}
        /&gt;,
        document.getElementById("react-app")
    )
}

// Initialise the app by rendering it
render({
    name: "James",
    message: "",
})
</code></pre>
<p>Don&#8217;t believe its possible? Check for yourself with <a href="https://jsfiddle.net/jamesknelson/8acuh8e0/1/">this JSBin</a>.</p>
<h2>Look Ma, No Component State!</h2>
<p>By calling <code>render</code> every time anything changes, we ensure our changes are visible, without storing them within <em>any</em> React component&#8217;s state.</p>
<p>And just to cap things off, we have access to enough information to render the <em>entire</em> application at any point in the app&#8217;s life cycle, all within that single <code>value</code> object. That surely has to be useful.</p>
<p>But wait a minute. If this solves all our problems, why does it seem nobody is doing anything this way? And doesn&#8217;t having enough information to render our application stored within <code>value</code> sound suspiciously like state?</p>
<p><strong>So my question to you is: does this app have state? And if so, where is it?</strong></p>
<p>And the bonus question: <em>Why don&#8217;t more apps follow this pattern?</em></p>
<p>Tweet your responses on hash tag <a href="https://twitter.com/search?f=tweets&amp;q=%23stateofreact&amp;src=typd">#stateofreact</a>, and I&#8217;ll respond in next week&#8217;s episode of <em>State Of React</em>! Sign up to my newsletter to make sure you don&#8217;t miss out &#8212; and grab a bunch of exclusive cheat sheets while you&#8217;re at it:</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p><em>Update: <a href="/state-react-2-inception-redux/">Part 2</a> is now out!</em></p>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="mailto:james@jamesknelson.com">james@jamesknelson.com</a>. I&#8217;m looking forward to hearing from you!</p>
<p>The post <a rel="nofollow" href="/state-react-1-stateless-react-app/">State of React #1: A Stateless React App?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/state-react-1-stateless-react-app/feed/</wfw:commentRss>
			<slash:comments>11</slash:comments>
		
		
			</item>
		<item>
		<title>Announcing ReactJS Tokyo</title>
		<link>/announcing-reactjs-tokyo/</link>
					<comments>/announcing-reactjs-tokyo/#respond</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Mon, 18 Jul 2016 11:50:05 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<guid isPermaLink="false">/?p=1026</guid>

					<description><![CDATA[<p>Have you ever wondered how other people write React apps? There are often multiple ways to solve the same problem, but finding the best way doesn&#8217;t have to mean implementing each of them yourself! So what I&#8217;m trying to say is that if you don&#8217;t like learning things the hard way and you&#8217;re in Tokyo,... <a class="more-link" href="/announcing-reactjs-tokyo/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/announcing-reactjs-tokyo/">Announcing ReactJS Tokyo</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>Have you ever wondered how other people write React apps? There are often multiple ways to solve the same problem, but finding the best way doesn&#8217;t have to mean implementing each of them yourself!</p>
<p>So what I&#8217;m trying to say is that if you don&#8217;t like learning things the hard way and you&#8217;re in Tokyo, you should totally come along to the <a href="https://www.meetup.com/ReactJS-Tokyo/events/232583458/">first ever ReactJS Tokyo meetup</a>.</p>
<p>All skill levels of English, æ¥æ¬èª and JavaScript are welcome. Snacks and drinks will be provided. It will take place on Thursday, 28th July in Roppongi, and places are limited. So make sure to register early.</p>
<p>Look forward to seeing you there!</p>
<p>The post <a rel="nofollow" href="/announcing-reactjs-tokyo/">Announcing ReactJS Tokyo</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/announcing-reactjs-tokyo/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Should I use shouldComponentUpdate?</title>
		<link>/should-i-use-shouldcomponentupdate/</link>
					<comments>/should-i-use-shouldcomponentupdate/#comments</comments>
		
		<dc:creator><![CDATA[James K Nelson]]></dc:creator>
		<pubDate>Sat, 28 May 2016 08:42:59 +0000</pubDate>
				<category><![CDATA[Javascript]]></category>
		<category><![CDATA[React]]></category>
		<guid isPermaLink="false">/?p=1013</guid>

					<description><![CDATA[<p>So you heard React was fast, and decided to give it a go. You grabbed a boilerplate, started working through it, and noticed shouldComponentUpdate and PureRenderMixin. Some googling reveals these are the things you use to make React fast. But wasn&#8217;t React already fast? The answer is that React is fast&#8230; sometimes. The other times,... <a class="more-link" href="/should-i-use-shouldcomponentupdate/">Continue reading <span class="meta-nav">&#8594;</span></a></p>
<p>The post <a rel="nofollow" href="/should-i-use-shouldcomponentupdate/">Should I use shouldComponentUpdate?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>So you heard React was <em>fast</em>, and decided to give it a go. You grabbed a boilerplate, started working through it, and noticed  <code>shouldComponentUpdate</code> and <code>PureRenderMixin</code>. Some googling reveals  these are the things you use to make React fast. <em>But wasn&#8217;t React already fast?</em></p>
<p>The answer is that React <em>is</em> fast&#8230; sometimes. The other times, you should use <code>shouldComponentUpdate</code>. <em>But when are the other times?</em> Wouldn&#8217;t it be so much easier if there was just a simple yes-no question which you could ask to decide whether to use <code>shouldComponentUpdate</code> or not? And wouldn&#8217;t you believe it, there is!</p>
<p><span id="more-1013"></span></p>
<p><em>Will <code>shouldComponentUpdate</code> provide a measurable and perceivable performance improvement?</em></p>
<p>If not, don&#8217;t use it.</p>
<h2>So you mean I probably shouldn&#8217;t be using it?</h2>
<p>You probably should avoid it. The React team called <code>shouldComponentUpdate</code> a performance <a href="https://github.com/facebook/react/issues/5677#issuecomment-165451439">escape hatch</a> for a reason &#8212; and you&#8217;d better bloody well hope that an escape hatch isn&#8217;t meant for regular use. Of course, &#8220;probably not&#8221; doesn&#8217;t mean &#8220;definitely not&#8221;.</p>
<p>React wouldn&#8217;t have a performance escape hatch if it wasn&#8217;t sometimes useful. The trick is that you need to ask yourself if you <em>should</em> use it &#8212; not whether you <em>shouldn&#8217;t</em>. And if you&#8217;re not a special snowflake, well, you&#8217;ll probably use it less often than not.</p>
<p><em>But hang on a moment</em>, you say. <em>My circumstances are different</em>. And&#8230; you&#8217;re probably right. So let&#8217;s have a look at the reasoning behind the rule, starting with:</p>
<h3>Adding <code>shouldComponentUpdate</code> will often slow your component down</h3>
<p>Yes, you read that correctly. A performance escape hatch can <em>actually</em> slow your component down. But how? To answer this question, we need to zoom out for a moment to a sky-high level, and ask: <em>what is React</em>?</p>
<p><strong>React is basically a very clever implementation of <code>shouldComponentUpdate</code>.</strong></p>
<p><em>But James</em>, you say. <em>React does a lot more than just figure out whether to update a component.</em> And you&#8217;re right. As well as deciding if a component should update, React also decides how to do it. But you can&#8217;t have one without the other, and it turns out React is generally pretty good at <em>both</em>.</p>
<p>Ok, so React is good at deciding whether a component should update. How does it work this magic?</p>
<p>Great question! So you know those <code>render</code> methods which you write for each of your components? It may look like they&#8217;re returning funny HTML-in-JavaScript (or <code>ReactElement</code> objects if you use <a href="/learn-raw-react-no-jsx-flux-es6-webpack/">Raw React</a>). But you may be surprised to hear that <code>render</code> <em>actually</em> returns plain old JavaScript objects. They look something like this:</p>
<pre><code>{
    type: 'ul',
    props: { className: 'what-do-you-want-to-do-tonight' },
    children: [
        { type: 'li', children: 'The same thing we do every night, pinky.' },
    ]
}
</code></pre>
<p>Sure, it might be all dressed up in JSX or calls to <code>React.createElement</code>, but the <em>true</em> form of <code>render()</code>&#8216;s output is just an object representing your markup. And if that object hasn&#8217;t changed from the previous render, there is obviously no need to update the DOM.</p>
<p>Or to put it another way, React basically implements <code>shouldComponentUpdate</code> for you for free. If we pretend <code>render</code> receives its props as an argument instead of attached to <code>this</code>, React&#8217;s implementation would look something like this:</p>
<pre><code>shouldComponentUpdate(nextProps) {
    return !deepEquals(render(this.props), render(nextProps))
}
</code></pre>
<p>As you know, <code>deepEquals</code> will be fast on small objects, and slow on heavily nested ones. So this approximation gives us a good rule of thumb:</p>
<p><em>If the value returned by <code>render</code> is tiny but <code>props</code> is heavy, <code>shouldComponentUpdate</code> will likely do more harm than good.</em></p>
<p>But say you have a case where the value returned by <code>render()</code> is large enough that you can gain something by writing <code>shouldComponentUpdate</code> yourself?</p>
<h3><code>shouldComponentUpdate</code> gains are often insignificant</h3>
<p>So let&#8217;s say you&#8217;re rendering something heavy like a HTML table. You&#8217;re pulling your data from your <code>props</code>, but you&#8217;re also doing some computations on it within your <code>render</code> method. And to make this the perfect scenario, your data uses <a href="https://facebook.github.io/immutable-js/docs/#/is">Immutable.js</a> such that changes in <code>props</code> can be found with simple reference equality.</p>
<p>In this scenario, <code>shouldComponentUpdate</code> will provide a huge speed up over React&#8217;s default behaviour. In fact, my experience has been that a <em>10 times speedup</em> is not unusual at all. But if this is the case, how can the gains be insignificant? The answer is of course:</p>
<p><strong>A 10x speedup of  less than 1 millisecond is still less than 1 millisecond.</strong></p>
<p><a href="https://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a> wrote that &#8220;premature optimization is the root of all evil&#8221; years before JavaScript was even imagined, but that does not make it any less relevant today.</p>
<p>Of course, us JavaScript programmers are not known for learning things the easy way, and a number of you are probably now asking &#8220;but some things are less evil than others, right?&#8221; After all, how much can a short three-line function <em>really</em> hurt when it isn&#8217;t even going to slow things down? Actually, my experience is that it can be <em>downright painful</em>.</p>
<h3>Maintaining <code>shouldComponentUpdate</code> is hard</h3>
<p>So if I had to guess, the reason the React team called <code>shouldComponentUpdate</code> an &#8220;escape hatch&#8221; instead of a &#8220;turbo button&#8221; is that maintenance is hard. But honestly, I think an &#8220;escape hatch&#8221; is the wrong analogy. <code>shouldComponentUpdate</code> is actually more like unprotected sex.</p>
<p>The thing is, <code>shouldComponentUpdate</code> is sometimes necessary, and certainly makes your app respond better. But it also is a <em>major</em> cause of bugs &#8212; and not ones which appear straight away.</p>
<p>But seriously, maintaining code with <code>shouldComponentUpdate</code> is hard. Add a new prop to <code>render</code> but forget to update <code>shouldComponentUpdate</code>? There&#8217;s a bug. Pass in a factory function as a <code>prop</code> which uses state from somewhere innocent like the current route? Another bug. And the worst thing is that these bugs often don&#8217;t appear in tests, because they don&#8217;t break until something, somewhere changes. And probably when you first demonstrate it to your customer at that.</p>
<p>But if <code>shouldComponentUpdate</code> truly causes this many bugs, it obviously must still be used on a somewhat regular basis. So the question becomes&#8230;</p>
<h2>When <em>should</em> I use <code>shouldComponentUpdate</code>?</h2>
<p>At the risk of repeating myself, this question has a very simple answer:</p>
<p><em>Use shouldComponentUpdate once you&#8217;ve measured that it provides a  perceivable performance improvement.</em></p>
<p>Hopefully the previous section has convinced you that   <code>shouldComponentUpdate</code> has a number of downsides. With these in mind, the trick is to only use it when you&#8217;re <em>sure</em> the upsides beat them. And to do that, you&#8217;ll need to use a ruler. A really fancy technological one.</p>
<h3>Measuring performance improvements</h3>
<p>While there are a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now">number</a> <a href="https://www.google.co.jp/search?q=stopwatch&amp;oq=stopwatch&amp;aqs=chrome..69i57.1533j0j7&amp;sourceid=chrome&amp;ie=UTF-8">of</a> <a href="https://en.wikipedia.org/wiki/A/B_testing">ways</a> you could try to measure the improvement given by <code>shouldComponentUpdate</code>, this article is going to focus on doing so with a JavaScript Profiler.</p>
<p>But what is a profiler? It&#8217;s that fancy ruler I mentioned. A good profiler will let you measure basically anything about your program. But in particular, it allows you to break down your script&#8217;s total running time by your functions:</p>
<p><img src="/wp-content/uploads/2016/05/profiler.png" alt="Profiler" /></p>
<p>By comparing the time spent in <code>render</code> both before and after we add <code>shouldComponentUpdate</code>, we can put a number to any performance improvement. Of course, we&#8217;ll also need to take into account time spent in <code>shouldComponentUpdate</code> &#8212; it isn&#8217;t free. Finally, with some mental gymnastics we can decide if the extra maintenance and general uncouthness of <code>shouldComponentUpdate</code> is worth the speedup.</p>
<p>Easy as 1-2-3, right? But don&#8217;t take my word for it &#8211; let&#8217;s walk through an exercise which demonstrates it. Right after giving you the opportunity to receive a free high-resolution React cheatsheet by subscribing to my newsletter:</p>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=18"></script>
<link rel="stylesheet" href="ck_form.html" />
<div class="ck_form single_line">

  <div class="ck_form_fields">
  
    <h3>Get the PDF cheatsheet!</h3>

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/58198/subscribe" data-remote="true">
      <input type="hidden" name="id" value="58198" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
        <div>
          <label class="ck_label" for="ck_firstNameField" style="display:none">First Name</label>
        
          <input type="text" name="first_name" placeholder="First name" class="ck_first_name" id="ck_firstNameField" required></input>
        </div>
        <div class="field">
          <label class="ck_label" for="ck_emailField" style="display:none">Email Address</label>
        
          <input type="email" name="email" placeholder="Email address" class="ck_email_address" id="ck_emailField" required></input>
        </div>

        <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
          Subscribe to my Newsletter
        </button>
    </form>
  </div>
 </div>
 <style type="text/css">
.ck_form.single_line {
  /* divider image */
  background: #f9f9f9;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border: solid 1px #d1d1d1;
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  box-shadow: none;
  clear: both;
  margin: 20px auto;
  text-align: center;
  width: 85%;
  border-radius: 6px;
}


.ck_form.single_line h3, #content .ck_form.single_line h3 { 
  text-align: center; 
  margin: 0px 0px 10px; 
  font-size: 24px;
}

.ck_form.single_line p {
  padding: 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

.ck_form.single_line .ck_form_fields {
  width: 100%;
  float: left;
  padding: 24px 0;
}
/* Form fields */

.ck_errorArea {
  display: none; /* temporary */
}

#ck_success_msg {
  margin: 0 30px;
  padding: 0 10px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_form.single_line input[type="text"], .ck_form.single_line input[type="email"] {
  font-size: 18px;
  padding: 10px 8px;
  width: 68%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px; /* border radius */
  background-color: #fff; /* layer fill content */
  height: auto;
  margin: 5px 0;
  height: 42px;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
} 

.ck_form.single_line .ck_checkbox {
  display: none;
}

.ck_form.single_line .ck_subscribe_button {
    color: #fff;
    margin: 0px;
    padding:  11px 22px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
    margin: 10px 0 0;
    height: 42px;
    width: auto;
  }
  
  
.ck_form.single_line .ck_guarantee {
  color: #626262;
  font-size: 15px;
  text-align: center;
  padding: 15px 0px 0px;
  display: block;
  clear: both;
}
 </style>
<h3>Exercise</h3>
<p>To demonstrate, I&#8217;ve put together an <a href="https://jsfiddle.net/nsh4b3Ly/2/">example fiddle</a>. The <code>Enterprise</code> component inside it is designed to meet the requirements which make <code>shouldComponentUpdate</code> a serious consideration; it does processing on the original value, it frequently re-renders, and its <code>props</code> contain immutable data.</p>
<p>To complete the exercise, all you need to do is create a copy of <a href="https://jsfiddle.net/nsh4b3Ly/2/">the project</a> and follow the steps below.</p>
<p><em>Before getting started, make sure you know how to start your browser&#8217;s profiler. You can find instructions at the <a href="https://developers.google.com/web/tools/chrome-devtools/profile/rendering-tools/js-execution">Chrome</a> or <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Profiling_with_the_Built-in_Profiler">Firefox</a> websites.</em></p>
<h4>Step 1: Measure the standard version</h4>
<p>Let&#8217;s start by measuring the time spent in <code>render</code> when the user clicks an action:</p>
<ol>
<li>Open the JavaScript profiler for the example fiddle&#8217;s window</li>
<li>Start recording<br />
<img src="/wp-content/uploads/2016/05/start-profiling.png" alt="Start recording" /></li>
<li>Click the &#8220;Toggle synergy!&#8221; link and let the page cycle for ~5 seconds<br />
<img src="/wp-content/uploads/2016/05/toggle-synergy.png" alt="Toggle Synergy" /></li>
<li>Stop recording by click the same button you used to start</li>
<li>Find the most costly <code>render</code> method by sorting by &#8220;self&#8221; time &#8212; it should be near the top of the list. Write down the duration of time spent in it. For this you want is the&#8221;total&#8221; time, i.e. time spent in both the <code>render</code> function itself, as well as functions it calls.<br />
<img src="/wp-content/uploads/2016/05/render-without-shouldComponentUpdate.png" alt="render" /></li>
</ol>
<p>But what if the times spent in <code>render</code> are small enough that you can&#8217;t find it near the top of the function list? Great! You don&#8217;t need <code>shouldComponentUpdate</code>. Or at least not until you fix all your <em>other</em> performance issues.</p>
<h4>Step 2: Measure the <code>shouldComponentUpdate</code> version</h4>
<p>The next step is to measure the amount of time spent rendering once we add <code>shouldComponentUpdate</code> to the <code>App</code> component. Obviously, to do so you&#8217;ll need a <code>shouldComponentUpdate</code>. Here&#8217;s one I prepared earlier:</p>
<pre><code>shouldComponentUpdate(nextProps, nextState) {
    return !Immutable.is(this.state.synergy, nextState.synergy)
},
</code></pre>
<p>Once you&#8217;ve added in <code>shouldComponentUpdate</code>, repeat the process in step 1. And once you&#8217;re done, finish off your results by finding and adding the time spent in <code>shouldComponentUpdate</code> to the time spent in <code>render</code>. Here are my results:</p>
<p><strong><code>render</code> with <code>shouldComponentUpdate</code>:</strong></p>
<p><img src="/wp-content/uploads/2016/05/render-with-shouldComponentUpdate.png" alt="render with shouldComponentUpdate" /></p>
<p><strong><code>shouldComponentUpdate</code>:</strong></p>
<p><img src="/wp-content/uploads/2016/05/shouldComponentUpdate.png" alt="shouldComponentUpdate" /></p>
<p>And there you have it! You now <em>roughly</em> know what kind of gain your component gets from <code>shouldComponentUpdate</code>. That is, if you get a gain at all.</p>
<p>But did you notice how I emphasised <em>roughly</em>? Make sure to keep in mind that this method is not all that precise &#8211; the actual results can vary a lot. If you don&#8217;t believe me, just try repeating the above and seeing how much they differ. But if the results are so inaccurate, how are you to ever make a good decision?</p>
<div class="hint">
Seriously, the results vary <em>a lot</em>. This method will get you a rough idea, but please &#8212; don&#8217;t show this to a statistician.
</div>
<h3>Making a decision</h3>
<p>At the risk of sounding abnormally <a href="https://jisho.org/search/shitsukoi"><em>shitsukoi</em></a>&#8230;</p>
<p><em>You only want to use <code>shouldComponentUpdate</code> if your measurements show you beyond any reasonable doubt that it makes sense.</em></p>
<p>What is beyond reasonable doubt? My experience has been that if adding <code>shouldComponentUpdate</code> halves your running time, it is probably actually providing a benefit &#8212; and not occurring by chance.</p>
<p>But with this said, keep in mind that the benefits you receive can only be as great as the original running time is long. If your original <code>render</code> function only takes on the order of 100ms, it is a tossup as to whether any benefits will be perceived at all.</p>
<p>At the end of the day, the decision has to be made in the context of the project you&#8217;re writing. But by keeping in mind the maintenance downsides, the measurement uncertainties and the ranges in which benefits can actually be perceived, you&#8217;ll be equipped to make the right decision. Of course, this all assumes that you&#8217;re measuring a well implemented <code>shouldComponentUpdate</code> in the first place.</p>
<h2>Writing an effective <code>shouldComponentUpdate</code></h2>
<p>So you&#8217;ve found the <em>perfect</em> spot for a dirty little <code>shouldComponentUpdate</code> &#8212; but how do you write it?</p>
<p>Now I could just wave my arms and then proclaim &#8220;Immutable.js!&#8221; But then I imagine you&#8217;d feel a little like this:</p>
<p><img src="/wp-content/uploads/2016/05/how-to-draw-an-owl-2.jpg" alt="How to draw an owl" /></p>
<p>The thing is, Immutable.js isn&#8217;t so much the solution as it is a (mindblowingly awesome) tool to build <em>your own</em> solution. And it isn&#8217;t the only tool either; plain ol&#8217; <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"><code>Object.assign</code></a> will get you most of the way there.</p>
<p>Ok. But if immutable state won&#8217;t solve your problems, what will?</p>
<p>I&#8217;m glad you asked! The <em>real</em> solution is <strong>well structured state</strong>. In fact, well structure state will solve more than just your <code>shouldComponentUpdate</code> implementation; it will fix <em>all of your problems down to the Jehova&#8217;s Witnesses waking you up to preach to you even after moving to Japan</em>. It is really <em>that</em> good.</p>
<p>But how do you structure your state well? That&#8217;s a great question, and is one I&#8217;m going to be answering in a couple posts time &#8212; right after my (nearly finished) Luddite&#8217;s guide to <span style="text-decoration: line-through">Redux</span> State. Don&#8217;t want to miss it? Then subscribe! You&#8217;ve got nothing to lose. Actually, you stand to <em>gain</em> the high resolution PDFs of these five React and JS cheatsheets:</p>
<div style="text-align: center;">
<img src="/wp-content/uploads/2016/05/cheatsheets.png" alt="cheatsheets">
</div>
<script src="https://app.convertkit.com/assets/CKJS4.js?v=21"></script>

<div class="ck_form ck_vertical_subscription_form">
  <div class="ck_form_content">
      <h3 class="ck_form_title">I will send you useful articles, cheatsheets and code.</h3>
      <div class="ck_description">
          I won't send you useless inbox filler. <em>No spam, ever.</em>
      </div>
  </div>

  <div class="ck_form_fields">

    <div id='ck_success_msg'  style='display:none;'>
      <p>Thanks! Please check your email for the link to your cheatsheets.</p>
    </div>

    <!--  Form starts here  -->
    <form id="ck_subscribe_form" class="ck_subscribe_form" action="https://app.convertkit.com/landing_pages/4375/subscribe" data-remote="true">
      <input type="hidden" value="{&quot;embed_style&quot;:&quot;inline&quot;,&quot;embed_trigger&quot;:&quot;scroll_percentage&quot;,&quot;scroll_percentage&quot;:&quot;70&quot;,&quot;delay_seconds&quot;:&quot;10&quot;,&quot;display_position&quot;:&quot;br&quot;,&quot;display_devices&quot;:&quot;all&quot;,&quot;days_no_show&quot;:&quot;15&quot;,&quot;converted_behavior&quot;:&quot;show&quot;}" id="ck_form_options"></input>
      <input type="hidden" name="id" value="4375" id="landing_page_id"></input>
      <div class="ck_errorArea">
        <div id="ck_error_msg" style="display:none">
          <p>There was an error submitting your subscription. Please try again.</p>
        </div>
      </div>
      <div class="ck_control_group ck_first_name_field_group">
        <label class="ck_label" for="ck_firstNameField">First Name</label>
        <input type="text" name="first_name" class="ck_first_name" id="ck_firstNameField"></input>
      </div>
      <div class="ck_control_group ck_email_field_group">
        <label class="ck_label" for="ck_emailField">Email Address</label>
          <input type="email" name="email" class="ck_email_address" id="ck_emailField" required></input>
      </div>
      <label class='ck_checkbox' style='display:none;'>
        <input class="optIn ck_course_opted" name='course_opted' type="checkbox" id="optIn" checked />
        <span class='ck_opt_in_prompt'>I'd like to receive the free email course.</span>
      </label>

      <button class="subscribe_button ck_subscribe_button btn fields" id='ck_subscribe_button'>
       Join over 13,000 subscribers
      </button>
      <span class="ck_guarantee">
        Unsubscribe at any time.
      </span>
    </form>
  </div>

 </div>


<style type="text/css">/* Layout */
  .ck_form {
  /* divider image */
  background: #fff url(data:image/gif;base64,R0lGODlhAQADAIABAMzMzP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ5NjM5RjgxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ5NjM5RjkxQUVEMTFFNEJBQTdGNTQwMjc5MTZDOTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRDk2MzlGNjFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRDk2MzlGNzFBRUQxMUU0QkFBN0Y1NDAyNzkxNkM5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAABAAMAAAICRFIAOw==) repeat-y center top;
  font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
  line-height: 1.5em;
  overflow: hidden;
  color: #666;
  font-size: 16px;
  border-top: solid 20px #3071b0;
  border-top-color: #b30e2f;
  border-bottom: solid 10px #3d3d3d;
  border-bottom-color: #5f0719;
  -webkit-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  -moz-box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  box-shadow: 0px 0px 5px rgba(0,0,0,.3);
  clear: both;
  margin: 20px 0px;
}

.ck_form * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

#ck_subscribe_form {
  clear: both;
}

/* Element Queries âÂ uses JS */

.ck_form_content, .ck_form_fields {
  width: 50%;
  float: left;
  padding: 5%;
}

.ck_form.ck_horizontal {
}

.ck_form_content {
  border-bottom: none;
}

.ck_form.ck_vertical {
  background: #fff;
}

.ck_vertical .ck_form_content, .ck_vertical .ck_form_fields {
  padding: 10%;
  width: 100%;
  float: none;
}

.ck_vertical .ck_form_content {
  border-bottom: 1px dotted #aaa;
  overflow: hidden;
}

/* Trigger the vertical layout with media queries as well */

@media all and (max-width: 499px) {

  .ck_form {
    background: #fff;
  }

  .ck_form_content, .ck_form_fields {
    padding: 10%;
    width: 100%;
    float: none;
  }

  .ck_form_content {
    border-bottom: 1px dotted #aaa;
  }

}

/* Content */

.ck_form_content h3 {
  margin: 0px 0px 15px;
  font-size: 24px;
  padding: 0px;
}


.ck_form_content p {
  font-size: 14px;
}

.ck_image {
  float: left;
  margin-right: 5px;
}

/* Form fields */

.ck_errorArea {
  display: none;
}

#ck_success_msg {
  padding: 10px 10px 0px;
  border: solid 1px #ddd;
  background: #eee;
}

.ck_label {
  font-size: 14px;
  font-weight: bold;
}

.ck_form input[type="text"], .ck_form input[type="email"] {
  font-size: 14px;
  padding: 10px 8px;
  width: 100%;
  border: 1px solid #d6d6d6; /* stroke */
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
  border-radius: 4px; /* border radius */
  background-color: #f8f7f7; /* layer fill content */
  margin-bottom: 5px;
  height: auto;
}

.ck_form input[type="text"]:focus, .ck_form input[type="email"]:focus {
  outline: none;
  border-color: #aaa;
}

.ck_checkbox {
  padding: 10px 0px 10px 20px;
  display: block;
  clear: both;
}

.ck_checkbox input.optIn {
  margin-left: -20px;
  margin-top: 0;
}
.ck_form .ck_opt_in_prompt {
  margin-left: 4px;
}
.ck_form .ck_opt_in_prompt p {
  display: inline;
}

.ck_form .ck_subscribe_button {
    width: 100%;
    color: #fff;
    margin: 10px 0px 0px;
    padding:  10px 0px;
    font-size: 18px;
    background: #b30e2f;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px; /* border radius */
    cursor: pointer;
    border: none;
    text-shadow: none;
  }


.ck_form .ck_guarantee {
  color: #626262;
  font-size: 12px;
  text-align: center;
  padding: 5px 0px;
  display: block;
}

.ck_form .ck_powered_by {
  display: block;
  color: #aaa;
}

.ck_form .ck_powered_by:hover {
  display: block;
  color: #444;
}

.ck_converted_content {
  display: none;
  padding: 5%;
  background: #fff;
}



</style>
<p>One more thing &#8211; <em>I love hearing your questions, offers and opinions.</em> If you have something to say, leave a comment or send me an e-mail at <a href="mailto:james@jamesknelson.com">james@jamesknelson.com</a>. I&#8217;m looking forward to hearing from you!</p>
<h2>Further Reading</h2>
<ul>
<li><a href="/learn-raw-react-no-jsx-flux-es6-webpack/">Learn Raw React â no JSX, Flux, ES6, Webpackâ¦</a></li>
<li><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"><code>Object.assign</code></a> at MDN</li>
</ul>
<p>The post <a rel="nofollow" href="/should-i-use-shouldcomponentupdate/">Should I use shouldComponentUpdate?</a> appeared first on <a rel="nofollow" href="/">James K Nelson</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>/should-i-use-shouldcomponentupdate/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
	</channel>
</rss>
